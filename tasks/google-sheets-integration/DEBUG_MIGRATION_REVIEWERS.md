# –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø–∏—Å—å—é –≤ migration_reviewers

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å–µ–π

### 1. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π, –Ω–æ –æ–Ω–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∑–∞–ø–∏—Å–∏ –∏—Å—á–µ–∑–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö: "–ú–∏–≥—Ä–∞—Ü–∏—è —Å UUID '...' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `not_found > 0`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ UUID –∏–∑ Google Sheets —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å `mb_project_uuid` –≤ —Ç–∞–±–ª–∏—Ü–µ `migrations`
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
  ```sql
  SELECT id, mb_project_uuid FROM migrations WHERE mb_project_uuid = '<uuid –∏–∑ Google Sheets>';
  ```

### 3. –û—à–∏–±–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö: "–û—à–∏–±–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞: –º–∏–≥—Ä–∞—Ü–∏—è —Å ID X –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
- PDO Error Code: 1452

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `migration_id` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `migrations`:
  ```sql
  SELECT id FROM migrations WHERE id = <migration_id>;
  ```

### 4. –¢–∞–±–ª–∏—Ü–∞ migration_reviewers –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö: "–¢–∞–±–ª–∏—Ü–∞ migration_reviewers –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
- PDO Error Code: 1146

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:
  ```bash
  php src/scripts/run_google_sheets_migration.php
  ```

### 5. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç–æ–º
**–°–∏–º–ø—Ç–æ–º—ã:**
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è
- –í –ª–æ–≥–∞—Ö: "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –±—ã–ª–∞ –Ω–∞—á–∞—Ç–∞"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PDO
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç –æ—Ç–∫–ª—é—á–µ–Ω

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
```sql
SELECT 
    mr.*,
    m.mb_project_uuid,
    m.brz_project_id
FROM migration_reviewers mr
INNER JOIN migrations m ON mr.migration_id = m.id
ORDER BY mr.created_at DESC;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
SELECT * FROM migration_reviewers WHERE migration_id = <id>;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
SELECT id, mb_project_uuid, brz_project_id FROM migrations WHERE mb_project_uuid = '<uuid>';
```

## –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö

1. **–ù–∞—á–∞–ª–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
   ```
   [GoogleSheetsSyncService::syncSheet] üöÄ –ù–ê–ß–ê–õ–û –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò
   ```

2. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:**
   ```
   [GoogleSheetsSyncService::syncSheet] ‚úì –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞: X —Å—Ç—Ä–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏
   ```

3. **–ü–æ–∏—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π:**
   ```
   [GoogleSheetsSyncService::syncSheet]     üîç –ü–æ–∏—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ UUID '...'
   [GoogleSheetsSyncService::syncSheet]     ‚úì –ù–∞–π–¥–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è: ID=X
   ```

4. **–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏:**
   ```
   [GoogleSheetsSyncService::upsertMigrationReviewer] üîÑ –ù–∞—á–∞–ª–æ upsert
   [GoogleSheetsSyncService::upsertMigrationReviewer] ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ: ID=X
   ```

5. **–ö–æ–º–º–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
   ```
   [GoogleSheetsSyncService::syncSheet] ‚úì –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
   ```

6. **–û—à–∏–±–∫–∏:**
   ```
   [GoogleSheetsSyncService::upsertMigrationReviewer] ‚ùå –û–®–ò–ë–ö–ê: ...
   ```

## –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π:
```sql
SELECT 
    mr.id,
    mr.migration_id,
    mr.uuid,
    mr.person_brizy,
    mr.created_at,
    m.mb_project_uuid
FROM migration_reviewers mr
LEFT JOIN migrations m ON mr.migration_id = m.id
ORDER BY mr.created_at DESC
LIMIT 10;
```

–ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.
